<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="A library for coupling (Py)Torch machine learning models to Fortran">
    <meta name="author" content="ICCS Cambridge" >
    <link rel="icon" href="../favicon.png">

    <title>FTorch test suite &ndash; FTorch</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">FTorch </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html">User Guide</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>FTorch test suite</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='index.html'>User Guide</a></li>
              <li class="breadcrumb-item active" aria-current="page">FTorch test suite</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="index.html">User Guide</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link" href="LICENSE.html">FTorch License</a>
              <a class="nav-link" href="archive.html">News archive</a>
              <a class="nav-link" href="changelog.html">FTorch Changelog</a>
              <a class="nav-link" href="cmake.html">Installation and Build Process</a>
              <a class="nav-link" href="developer.html">Developer Guide</a>
              <a class="nav-link" href="examples.html">Examples</a>
              <a class="nav-link" href="gpu.html">GPU Support</a>
              <a class="nav-link" href="hpc.html">Guidance for use in High Performance Computing (HPC)</a>
              <a class="nav-link" href="offline.html">Offline training</a>
              <a class="nav-link" href="online.html">Online training</a>
              <a class="nav-link" href="presentations.html">Presentations</a>
              <a class="nav-link" href="tensor.html">Tensor API</a>
              <a class="nav-link active disabled" href="testing.html">FTorch test suite</a>
              <a class="nav-link" href="transposing.html">When to transpose data</a>
              <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
              <a class="nav-link" href="updates.html">Recent API Changes</a>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <div class="toc">
<ul>
<li><a href="#testing">Testing</a><ul>
<li><a href="#building">Building</a></li>
<li><a href="#running">Running</a><ul>
<li><a href="#running-unit-tests">Running unit tests</a></li>
<li><a href="#running-integration-tests">Running integration tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="testing">Testing</h2>
<p>FTorch's test suite is currently comprised of unit tests, as well as integration
tests based on a subset of the <a href="examples.html">examples</a>. These tests are built
and run and their outputs are analysed.</p>
<h3 id="building">Building</h3>
<p>To enable FTorch's test suite, ensure that the <code>CMAKE_BUILD_TESTS</code> option
is set to <code>TRUE</code> for the build,  i.e., <code>-DCMAKE_BUILD_TESTS=True</code>. If you want
to run the unit tests, you will also need to install
<a href="https://github.com/Goddard-Fortran-Ecosystem/pFUnit">pFUnit</a> and pass its
install directory to the <code>CMAKE_PREFIX_PATH</code> when building FTorch.
If a <code>GPU_DEVICE</code> is specified but only one is available, i.e. when in a single GPU setting, you will need to also set the <code>MULTI_GPU</code> option to <code>OFF</code>.
This will skip the 'multiple GPU' integration test which requires multiple devices to be available.</p>
<p>The CMake build will automatically install any additional Python dependencies
for the examples.</p>
<p>Note that, whilst example <code>5_Looping</code> is built if <code>CMAKE_BUILD_TESTS=TRUE</code> is
specified, it is not run as part of the integration test suite because it
demonstrates 'good' versus 'bad' practice, as opposed to functionality.</p>
<h3 id="running">Running</h3>
<p>Once the build is complete, activate the Python virtual environment you created
for FTorch<sup>1</sup> and simply call <code>ctest</code> from the build directory. Doing
this, you can pass
<a href="https://cmake.org/cmake/help/latest/manual/ctest.1.html">arguments</a> to <code>ctest</code>
for greater control over the testing configuration.</p>
<p>See the subsections below for instructions on how to run subsets of the full
test suite.</p>
<blockquote>
<p><sup>1</sup> <em>If you built FTorch against LibTorch (rather than creating a
virtual environment) then you will need to
<a href="https://docs.python.org/3/library/venv.html">create a virtual environment</a> for
the purposes of integration testing as this script will install packages into your
Python environment and will check that a virtual environment is in use.</em></p>
</blockquote>
<h4 id="running-unit-tests">Running unit tests</h4>
<p>Unit tests may be executed in the following ways:</p>
<ol>
<li>Navigate to the build directory and call <code>ctest -R unittest</code> to run all unit
   tests. (This will run all tests whose names start with 'unittest'.)</li>
<li>Navigate to the build directory and call
   <code>ctest -R unittest_tensor_constructors_destructors</code> (for example) to run a
   specific unit test.</li>
</ol>
<p>Either approach will produce a report on which of the requested tests passed
and which failed for your build.</p>
<h4 id="running-integration-tests">Running integration tests</h4>
<p>Integration tests may be executed in the following ways:</p>
<ol>
<li>Navigate to the build directory and call <code>ctest -R example</code> to run all
   integration tests. (This will run all tests whose names start with
   'example').</li>
<li>Run the tests associated with a specific example by navigating to the build
   directory and calling <code>ctest -R example2</code>, for example.</li>
<li>Run the tests associated with a specific example by navigating to the
   corresponding subdirectory of <code>${BUILD_DIR}/examples</code> (where <code>${BUILD_DIR}</code>
   is the build directory for FTorch) and calling <code>ctest</code>.</li>
</ol>
<p>Any of the above will produce a report on which of the requested tests passed
and which failed for your build.</p>
<p>Note that some of the examples have additional dependencies. While these will be
installed into your virtual environment as part of the CMake build, you should
ensure that the same virtual environment is active when you run the tests.</p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              FTorch
 was developed by ICCS Cambridge<br>              &copy; 2025 <a rel="license" href="https://opensource.org/licenses/MIT">MIT</a>
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>